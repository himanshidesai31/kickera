{% extends 'navbar.html' %}
{% load static %}
{% block title %}
    Wishlist
{% endblock title %}
{% block content %}
	<!-- Start Banner Area -->
{#	<section class="banner-area organic-breadcrumb">#}
{#		<div class="container">#}
{#			<div class="breadcrumb-banner d-flex flex-wrap align-items-center justify-content-end">#}
{#				<div class="col-first">#}
{#					<h1>Wishlist</h1>#}
{#					<nav class="d-flex align-items-center">#}
{#						<a href="{% url 'index' %}">Home<span class="lnr lnr-arrow-right"></span></a>#}
{#						<a href="{% url 'wishlist' %}">Wish-list</a>#}
{#					</nav>#}
{#				</div>#}
{#			</div>#}
{#		</div>#}
{#	</section>#}
	<!-- End Banner Area -->

	<!--================Cart Area =================-->

    <section class="cart_area mt-5 " style="padding: 40px 0;">
    <div class="container mt-5">
        <div class="cart_inner" style="background: #fff; padding: 20px; border-radius: 5px; box-shadow: 0 0 10px rgba(0,0,0,0.05);">
            <h2 class="text-secondary text-center ">Your Wish list's</h2>

            {% if messages %}
                {% for message in messages %}
                    <div class="alert {% if message.tags == 'error' %}alert-danger{% else %}alert-success{% endif %}"
                         style="margin-bottom: 20px; padding: 10px 15px; border-radius: 4px;">
                        {{ message }}
                    </div>
                {% endfor %}
            {% endif %}

            <div class="table-responsive">
                <table class="table" style="width: 100%;">
                    <thead style="background: #f8f9fa;">
                        <tr>
                            <th style="padding: 12px; width: 40%;">Product</th>
                            <th style="padding: 12px; width: 15%;">Price</th>
                            <th style="padding: 12px; width: 15%;">Action</th>
                        </tr>
                    </thead>
                    <tbody>
                    {% for item in wish_list %}
                        <tr style="border-bottom: 1px solid #dee2e6;">
                            <td style="padding: 15px 12px; vertical-align: middle;">
                                <div style="display: flex; align-items: center;">
                                    <div style="margin-right: 15px; width: 80px;">
                                        {% if item.product.images.exists %}
                                            <img src="{{ item.product.images.first.image.url }}"
                                                 alt="{{ item.product.name }}"
                                                 style="width: 100%; height: auto; border-radius: 4px;">
                                        {% else %}
                                            <div style="width: 80px; height: 80px; background: #f8f9fa;
                                                 display: flex; align-items: center; justify-content: center;
                                                 border-radius: 4px;">
                                                No Image
                                            </div>
                                        {% endif %}
                                    </div>
                                    <div>
                                        <p style="margin: 0; font-weight: 500;">{{ item.product.name }}</p>
                                    </div>
                                </div>
                            </td>
                            <td style="padding: 15px 12px; vertical-align: middle;">â‚¹{{ item.product.price }}</td>
                            <td>
                                <div class="action-buttons">
                                    <!-- Add to Cart Button -->
                                    <form id="cart-form-{{ item.product.pk }}" action="{% url 'cart_add' item.product.pk %}" method="POST" class="d-inline">
                                        {% csrf_token %}
                                        <input type="hidden" name="next" value="{% url 'wishlist' %}">
                                        <button type="submit" class="btn btn-secondary btn-sm" style="margin-right: 5px;">
                                            Add to Cart
                                        </button>
                                    </form>
                                    
                                    <!-- Remove Button -->
                                    <a href="{% url 'remove_wishlist' item.id %}"
                                       class="btn btn-outline-danger btn-sm"
                                       style="padding: 5px 10px; border-radius: 4px; text-decoration: none;">
                                        Remove
                                    </a>
                                </div>
                            </td>
                        </tr>
                        {% empty %}
                        <tr>
                            <td colspan="5" style="padding: 30px; text-align: center;">
                                Your Wish list is empty.
                            </td>
                        </tr>
                        {% endfor %}

                    </tbody>
                </table>
            </div>
            {% if wish_list %}
            <div style="display: flex; justify-content: space-between; margin-top: 20px;">
                <a href="{% url 'index' %}"
                  class="text-black bg-light border rounded-pill px-3 py-2"
                        style="padding: 10px 20px;
                        border-radius: 4px; color: black; text-decoration: none; cursor: pointer;">
                    Continue Shopping
                </a>
                <form action="{% url 'add_all_to_cart' %}" method="POST">
                    {% csrf_token %}
                    {% for item in wish_list %}
                    <input type="hidden" name="product_ids" value="{{ item.product.id }}">
                    {% endfor %}
                    <input type="hidden" name="next" value="{% url 'cart_list' %}">
                    <button type="submit" class="text-black bg-light border rounded-pill px-3 py-2"
                        style="padding: 10px 20px;
                        border-radius: 4px; color: black; text-decoration: none; cursor: pointer;">
                        Add All Products to Cart
                    </button>
                </form>
            </div>
            {% else %}
            <div style="text-align: center; margin-top: 20px;">
                <a href="{% url 'index' %}"
                   style="padding: 10px 20px; background: #007bff; border: 1px solid #007bff;
                          border-radius: 4px; color: #fff; text-decoration: none;">
                    Start Shopping
                </a>
            </div>
            {% endif %}
        </div>
    </div>
</section>
{% endblock content %}